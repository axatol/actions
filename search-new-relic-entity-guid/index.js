"use strict";var Mu=Object.create;var Un=Object.defineProperty;var Iu=Object.getOwnPropertyDescriptor;var Fu=Object.getOwnPropertyNames;var Uu=Object.getPrototypeOf,xu=Object.prototype.hasOwnProperty;var xt=(r,t)=>()=>(r&&(t=r(r=0)),t);var k=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),$u=(r,t)=>{for(var o in t)Un(r,o,{get:t[o],enumerable:!0})},zu=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fu(t))!xu.call(r,s)&&s!==o&&Un(r,s,{get:()=>t[s],enumerable:!(i=Iu(t,s))||i.enumerable});return r};var Ae=(r,t,o)=>(o=r!=null?Mu(Uu(r)):{},zu(t||!r||!r.__esModule?Un(o,"default",{value:r,enumerable:!0}):o,r));var Or=k(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.toCommandProperties=bt.toCommandValue=void 0;function ju(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}bt.toCommandValue=ju;function Nu(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}bt.toCommandProperties=Nu});var Ui=k(se=>{"use strict";var Hu=se&&se.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),Vu=se&&se.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Yu=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Hu(t,r,o);return Vu(t,r),t};Object.defineProperty(se,"__esModule",{value:!0});se.issue=se.issueCommand=void 0;var Gu=Yu(require("os")),Ii=Or();function Fi(r,t,o){let i=new xn(r,t,o);process.stdout.write(i.toString()+Gu.EOL)}se.issueCommand=Fi;function Qu(r,t=""){Fi(r,{},t)}se.issue=Qu;var Mi="::",xn=class{constructor(t,o,i){t||(t="missing.command"),this.command=t,this.properties=o,this.message=i}toString(){let t=Mi+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let o=!0;for(let i in this.properties)if(this.properties.hasOwnProperty(i)){let s=this.properties[i];s&&(o?o=!1:t+=",",t+=`${i}=${Ku(s)}`)}}return t+=`${Mi}${Ju(this.message)}`,t}};function Ju(r){return Ii.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ku(r){return Ii.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var zn=k($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.default=el;var Zu=Xu(require("crypto"));function Xu(r){return r&&r.__esModule?r:{default:r}}var Br=new Uint8Array(256),qr=Br.length;function el(){return qr>Br.length-16&&(Zu.default.randomFillSync(Br),qr=0),Br.slice(qr,qr+=16)}});var xi=k(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.default=void 0;var tl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Dr.default=tl});var $t=k(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.default=void 0;var rl=nl(xi());function nl(r){return r&&r.__esModule?r:{default:r}}function ol(r){return typeof r=="string"&&rl.default.test(r)}var il=ol;kr.default=il});var zt=k(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.default=void 0;var al=sl($t());function sl(r){return r&&r.__esModule?r:{default:r}}var N=[];for(let r=0;r<256;++r)N.push((r+256).toString(16).substr(1));function ul(r,t=0){let o=(N[r[t+0]]+N[r[t+1]]+N[r[t+2]]+N[r[t+3]]+"-"+N[r[t+4]]+N[r[t+5]]+"-"+N[r[t+6]]+N[r[t+7]]+"-"+N[r[t+8]]+N[r[t+9]]+"-"+N[r[t+10]]+N[r[t+11]]+N[r[t+12]]+N[r[t+13]]+N[r[t+14]]+N[r[t+15]]).toLowerCase();if(!(0,al.default)(o))throw TypeError("Stringified UUID is invalid");return o}var ll=ul;Wr.default=ll});var ji=k(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.default=void 0;var fl=zi(zn()),cl=zi(zt());function zi(r){return r&&r.__esModule?r:{default:r}}var $i,jn,Nn=0,Hn=0;function dl(r,t,o){let i=t&&o||0,s=t||new Array(16);r=r||{};let l=r.node||$i,f=r.clockseq!==void 0?r.clockseq:jn;if(l==null||f==null){let _=r.random||(r.rng||fl.default)();l==null&&(l=$i=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),f==null&&(f=jn=(_[6]<<8|_[7])&16383)}let m=r.msecs!==void 0?r.msecs:Date.now(),h=r.nsecs!==void 0?r.nsecs:Hn+1,d=m-Nn+(h-Hn)/1e4;if(d<0&&r.clockseq===void 0&&(f=f+1&16383),(d<0||m>Nn)&&r.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Nn=m,Hn=h,jn=f,m+=122192928e5;let y=((m&268435455)*1e4+h)%4294967296;s[i++]=y>>>24&255,s[i++]=y>>>16&255,s[i++]=y>>>8&255,s[i++]=y&255;let g=m/4294967296*1e4&268435455;s[i++]=g>>>8&255,s[i++]=g&255,s[i++]=g>>>24&15|16,s[i++]=g>>>16&255,s[i++]=f>>>8|128,s[i++]=f&255;for(let _=0;_<6;++_)s[i+_]=l[_];return t||(0,cl.default)(s)}var hl=dl;Lr.default=hl});var Vn=k(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.default=void 0;var pl=ml($t());function ml(r){return r&&r.__esModule?r:{default:r}}function bl(r){if(!(0,pl.default)(r))throw TypeError("Invalid UUID");let t,o=new Uint8Array(16);return o[0]=(t=parseInt(r.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=t&255,o[4]=(t=parseInt(r.slice(9,13),16))>>>8,o[5]=t&255,o[6]=(t=parseInt(r.slice(14,18),16))>>>8,o[7]=t&255,o[8]=(t=parseInt(r.slice(19,23),16))>>>8,o[9]=t&255,o[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=t&255,o}var yl=bl;Mr.default=yl});var Yn=k(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.default=wl;Ze.URL=Ze.DNS=void 0;var _l=Ni(zt()),gl=Ni(Vn());function Ni(r){return r&&r.__esModule?r:{default:r}}function Sl(r){r=unescape(encodeURIComponent(r));let t=[];for(let o=0;o<r.length;++o)t.push(r.charCodeAt(o));return t}var Hi="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ze.DNS=Hi;var Vi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ze.URL=Vi;function wl(r,t,o){function i(s,l,f,m){if(typeof s=="string"&&(s=Sl(s)),typeof l=="string"&&(l=(0,gl.default)(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+s.length);if(h.set(l),h.set(s,l.length),h=o(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,f){m=m||0;for(let d=0;d<16;++d)f[m+d]=h[d];return f}return(0,_l.default)(h)}try{i.name=r}catch{}return i.DNS=Hi,i.URL=Vi,i}});var Yi=k(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.default=void 0;var Rl=vl(require("crypto"));function vl(r){return r&&r.__esModule?r:{default:r}}function Tl(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),Rl.default.createHash("md5").update(r).digest()}var El=Tl;Ir.default=El});var Qi=k(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.default=void 0;var Pl=Gi(Yn()),Al=Gi(Yi());function Gi(r){return r&&r.__esModule?r:{default:r}}var Cl=(0,Pl.default)("v3",48,Al.default),Ol=Cl;Fr.default=Ol});var Ki=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.default=void 0;var ql=Ji(zn()),Bl=Ji(zt());function Ji(r){return r&&r.__esModule?r:{default:r}}function Dl(r,t,o){r=r||{};let i=r.random||(r.rng||ql.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){o=o||0;for(let s=0;s<16;++s)t[o+s]=i[s];return t}return(0,Bl.default)(i)}var kl=Dl;Ur.default=kl});var Zi=k(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.default=void 0;var Wl=Ll(require("crypto"));function Ll(r){return r&&r.__esModule?r:{default:r}}function Ml(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),Wl.default.createHash("sha1").update(r).digest()}var Il=Ml;xr.default=Il});var ea=k($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.default=void 0;var Fl=Xi(Yn()),Ul=Xi(Zi());function Xi(r){return r&&r.__esModule?r:{default:r}}var xl=(0,Fl.default)("v5",80,Ul.default),$l=xl;$r.default=$l});var ta=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.default=void 0;var zl="00000000-0000-0000-0000-000000000000";zr.default=zl});var ra=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var jl=Nl($t());function Nl(r){return r&&r.__esModule?r:{default:r}}function Hl(r){if(!(0,jl.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Vl=Hl;jr.default=Vl});var na=k(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});Object.defineProperty(me,"v1",{enumerable:!0,get:function(){return Yl.default}});Object.defineProperty(me,"v3",{enumerable:!0,get:function(){return Gl.default}});Object.defineProperty(me,"v4",{enumerable:!0,get:function(){return Ql.default}});Object.defineProperty(me,"v5",{enumerable:!0,get:function(){return Jl.default}});Object.defineProperty(me,"NIL",{enumerable:!0,get:function(){return Kl.default}});Object.defineProperty(me,"version",{enumerable:!0,get:function(){return Zl.default}});Object.defineProperty(me,"validate",{enumerable:!0,get:function(){return Xl.default}});Object.defineProperty(me,"stringify",{enumerable:!0,get:function(){return ef.default}});Object.defineProperty(me,"parse",{enumerable:!0,get:function(){return tf.default}});var Yl=Ce(ji()),Gl=Ce(Qi()),Ql=Ce(Ki()),Jl=Ce(ea()),Kl=Ce(ta()),Zl=Ce(ra()),Xl=Ce($t()),ef=Ce(zt()),tf=Ce(Vn());function Ce(r){return r&&r.__esModule?r:{default:r}}});var sa=k(ue=>{"use strict";var rf=ue&&ue.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),nf=ue&&ue.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ia=ue&&ue.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&rf(t,r,o);return nf(t,r),t};Object.defineProperty(ue,"__esModule",{value:!0});ue.prepareKeyValueMessage=ue.issueFileCommand=void 0;var oa=ia(require("fs")),Gn=ia(require("os")),of=na(),aa=Or();function af(r,t){let o=process.env[`GITHUB_${r}`];if(!o)throw new Error(`Unable to find environment variable for file command ${r}`);if(!oa.existsSync(o))throw new Error(`Missing file at path: ${o}`);oa.appendFileSync(o,`${aa.toCommandValue(t)}${Gn.EOL}`,{encoding:"utf8"})}ue.issueFileCommand=af;function sf(r,t){let o=`ghadelimiter_${of.v4()}`,i=aa.toCommandValue(t);if(r.includes(o))throw new Error(`Unexpected input: name should not contain the delimiter "${o}"`);if(i.includes(o))throw new Error(`Unexpected input: value should not contain the delimiter "${o}"`);return`${r}<<${o}${Gn.EOL}${i}${Gn.EOL}${o}`}ue.prepareKeyValueMessage=sf});var la=k(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.checkBypass=yt.getProxyUrl=void 0;function uf(r){let t=r.protocol==="https:";if(ua(r))return;let o=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(o)return new URL(o)}yt.getProxyUrl=uf;function ua(r){if(!r.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let o;r.port?o=Number(r.port):r.protocol==="http:"?o=80:r.protocol==="https:"&&(o=443);let i=[r.hostname.toUpperCase()];typeof o=="number"&&i.push(`${i[0]}:${o}`);for(let s of t.split(",").map(l=>l.trim().toUpperCase()).filter(l=>l))if(i.some(l=>l===s))return!0;return!1}yt.checkBypass=ua});var ha=k(_t=>{"use strict";var Kc=require("net"),lf=require("tls"),Qn=require("http"),fa=require("https"),ff=require("events"),Zc=require("assert"),cf=require("util");_t.httpOverHttp=df;_t.httpsOverHttp=hf;_t.httpOverHttps=pf;_t.httpsOverHttps=mf;function df(r){var t=new Oe(r);return t.request=Qn.request,t}function hf(r){var t=new Oe(r);return t.request=Qn.request,t.createSocket=ca,t.defaultPort=443,t}function pf(r){var t=new Oe(r);return t.request=fa.request,t}function mf(r){var t=new Oe(r);return t.request=fa.request,t.createSocket=ca,t.defaultPort=443,t}function Oe(r){var t=this;t.options=r||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Qn.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(i,s,l,f){for(var m=da(s,l,f),h=0,d=t.requests.length;h<d;++h){var y=t.requests[h];if(y.host===m.host&&y.port===m.port){t.requests.splice(h,1),y.request.onSocket(i);return}}i.destroy(),t.removeSocket(i)})}cf.inherits(Oe,ff.EventEmitter);Oe.prototype.addRequest=function(t,o,i,s){var l=this,f=Jn({request:t},l.options,da(o,i,s));if(l.sockets.length>=this.maxSockets){l.requests.push(f);return}l.createSocket(f,function(m){m.on("free",h),m.on("close",d),m.on("agentRemove",d),t.onSocket(m);function h(){l.emit("free",m,f)}function d(y){l.removeSocket(m),m.removeListener("free",h),m.removeListener("close",d),m.removeListener("agentRemove",d)}})};Oe.prototype.createSocket=function(t,o){var i=this,s={};i.sockets.push(s);var l=Jn({},i.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(l.localAddress=t.localAddress),l.proxyAuth&&(l.headers=l.headers||{},l.headers["Proxy-Authorization"]="Basic "+new Buffer(l.proxyAuth).toString("base64")),ze("making CONNECT request");var f=i.request(l);f.useChunkedEncodingByDefault=!1,f.once("response",m),f.once("upgrade",h),f.once("connect",d),f.once("error",y),f.end();function m(g){g.upgrade=!0}function h(g,_,w){process.nextTick(function(){d(g,_,w)})}function d(g,_,w){if(f.removeAllListeners(),_.removeAllListeners(),g.statusCode!==200){ze("tunneling socket could not be established, statusCode=%d",g.statusCode),_.destroy();var S=new Error("tunneling socket could not be established, statusCode="+g.statusCode);S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(s);return}if(w.length>0){ze("got illegal response body from proxy"),_.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(s);return}return ze("tunneling connection has established"),i.sockets[i.sockets.indexOf(s)]=_,o(_)}function y(g){f.removeAllListeners(),ze(`tunneling socket could not be established, cause=%s
`,g.message,g.stack);var _=new Error("tunneling socket could not be established, cause="+g.message);_.code="ECONNRESET",t.request.emit("error",_),i.removeSocket(s)}};Oe.prototype.removeSocket=function(t){var o=this.sockets.indexOf(t);if(o!==-1){this.sockets.splice(o,1);var i=this.requests.shift();i&&this.createSocket(i,function(s){i.request.onSocket(s)})}};function ca(r,t){var o=this;Oe.prototype.createSocket.call(o,r,function(i){var s=r.request.getHeader("host"),l=Jn({},o.options,{socket:i,servername:s?s.replace(/:.*$/,""):r.host}),f=lf.connect(0,l);o.sockets[o.sockets.indexOf(i)]=f,t(f)})}function da(r,t,o){return typeof r=="string"?{host:r,port:t,localAddress:o}:r}function Jn(r){for(var t=1,o=arguments.length;t<o;++t){var i=arguments[t];if(typeof i=="object")for(var s=Object.keys(i),l=0,f=s.length;l<f;++l){var m=s[l];i[m]!==void 0&&(r[m]=i[m])}}return r}var ze;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ze=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:ze=function(){};_t.debug=ze});var ma=k((ed,pa)=>{pa.exports=ha()});var ya=k(L=>{"use strict";var bf=L&&L.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),yf=L&&L.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Gr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&bf(t,r,o);return yf(t,r),t},z=L&&L.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(L,"__esModule",{value:!0});L.HttpClient=L.isHttps=L.HttpClientResponse=L.HttpClientError=L.getProxyUrl=L.MediaTypes=L.Headers=L.HttpCodes=void 0;var Nr=Gr(require("http")),Kn=Gr(require("https")),ba=Gr(la()),Hr=Gr(ma()),be;(function(r){r[r.OK=200]="OK",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.ResourceMoved=302]="ResourceMoved",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.SwitchProxy=306]="SwitchProxy",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout"})(be=L.HttpCodes||(L.HttpCodes={}));var Y;(function(r){r.Accept="accept",r.ContentType="content-type"})(Y=L.Headers||(L.Headers={}));var je;(function(r){r.ApplicationJson="application/json"})(je=L.MediaTypes||(L.MediaTypes={}));function _f(r){let t=ba.getProxyUrl(new URL(r));return t?t.href:""}L.getProxyUrl=_f;var gf=[be.MovedPermanently,be.ResourceMoved,be.SeeOther,be.TemporaryRedirect,be.PermanentRedirect],Sf=[be.BadGateway,be.ServiceUnavailable,be.GatewayTimeout],wf=["OPTIONS","GET","DELETE","HEAD"],Rf=10,vf=5,gt=class extends Error{constructor(t,o){super(t),this.name="HttpClientError",this.statusCode=o,Object.setPrototypeOf(this,gt.prototype)}};L.HttpClientError=gt;var Yr=class{constructor(t){this.message=t}readBody(){return z(this,void 0,void 0,function*(){return new Promise(t=>z(this,void 0,void 0,function*(){let o=Buffer.alloc(0);this.message.on("data",i=>{o=Buffer.concat([o,i])}),this.message.on("end",()=>{t(o.toString())})}))})}};L.HttpClientResponse=Yr;function Tf(r){return new URL(r).protocol==="https:"}L.isHttps=Tf;var Zn=class{constructor(t,o,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=o||[],this.requestOptions=i,i&&(i.ignoreSslError!=null&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,i.allowRedirects!=null&&(this._allowRedirects=i.allowRedirects),i.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=i.allowRedirectDowngrade),i.maxRedirects!=null&&(this._maxRedirects=Math.max(i.maxRedirects,0)),i.keepAlive!=null&&(this._keepAlive=i.keepAlive),i.allowRetries!=null&&(this._allowRetries=i.allowRetries),i.maxRetries!=null&&(this._maxRetries=i.maxRetries))}options(t,o){return z(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,o||{})})}get(t,o){return z(this,void 0,void 0,function*(){return this.request("GET",t,null,o||{})})}del(t,o){return z(this,void 0,void 0,function*(){return this.request("DELETE",t,null,o||{})})}post(t,o,i){return z(this,void 0,void 0,function*(){return this.request("POST",t,o,i||{})})}patch(t,o,i){return z(this,void 0,void 0,function*(){return this.request("PATCH",t,o,i||{})})}put(t,o,i){return z(this,void 0,void 0,function*(){return this.request("PUT",t,o,i||{})})}head(t,o){return z(this,void 0,void 0,function*(){return this.request("HEAD",t,null,o||{})})}sendStream(t,o,i,s){return z(this,void 0,void 0,function*(){return this.request(t,o,i,s)})}getJson(t,o={}){return z(this,void 0,void 0,function*(){o[Y.Accept]=this._getExistingOrDefaultHeader(o,Y.Accept,je.ApplicationJson);let i=yield this.get(t,o);return this._processResponse(i,this.requestOptions)})}postJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,je.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,je.ApplicationJson);let l=yield this.post(t,s,i);return this._processResponse(l,this.requestOptions)})}putJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,je.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,je.ApplicationJson);let l=yield this.put(t,s,i);return this._processResponse(l,this.requestOptions)})}patchJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,je.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,je.ApplicationJson);let l=yield this.patch(t,s,i);return this._processResponse(l,this.requestOptions)})}request(t,o,i,s){return z(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let l=new URL(o),f=this._prepareRequest(t,l,s),m=this._allowRetries&&wf.includes(t)?this._maxRetries+1:1,h=0,d;do{if(d=yield this.requestRaw(f,i),d&&d.message&&d.message.statusCode===be.Unauthorized){let g;for(let _ of this.handlers)if(_.canHandleAuthentication(d)){g=_;break}return g?g.handleAuthentication(this,f,i):d}let y=this._maxRedirects;for(;d.message.statusCode&&gf.includes(d.message.statusCode)&&this._allowRedirects&&y>0;){let g=d.message.headers.location;if(!g)break;let _=new URL(g);if(l.protocol==="https:"&&l.protocol!==_.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),_.hostname!==l.hostname)for(let w in s)w.toLowerCase()==="authorization"&&delete s[w];f=this._prepareRequest(t,_,s),d=yield this.requestRaw(f,i),y--}if(!d.message.statusCode||!Sf.includes(d.message.statusCode))return d;h+=1,h<m&&(yield d.readBody(),yield this._performExponentialBackoff(h))}while(h<m);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,o){return z(this,void 0,void 0,function*(){return new Promise((i,s)=>{function l(f,m){f?s(f):m?i(m):s(new Error("Unknown error"))}this.requestRawWithCallback(t,o,l)})})}requestRawWithCallback(t,o,i){typeof o=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(o,"utf8"));let s=!1;function l(h,d){s||(s=!0,i(h,d))}let f=t.httpModule.request(t.options,h=>{let d=new Yr(h);l(void 0,d)}),m;f.on("socket",h=>{m=h}),f.setTimeout(this._socketTimeout||3*6e4,()=>{m&&m.end(),l(new Error(`Request timeout: ${t.options.path}`))}),f.on("error",function(h){l(h)}),o&&typeof o=="string"&&f.write(o,"utf8"),o&&typeof o!="string"?(o.on("close",function(){f.end()}),o.pipe(f)):f.end()}getAgent(t){let o=new URL(t);return this._getAgent(o)}_prepareRequest(t,o,i){let s={};s.parsedUrl=o;let l=s.parsedUrl.protocol==="https:";s.httpModule=l?Kn:Nr;let f=l?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):f,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=t,s.options.headers=this._mergeHeaders(i),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let m of this.handlers)m.prepareRequest(s.options);return s}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Vr(this.requestOptions.headers),Vr(t||{})):Vr(t||{})}_getExistingOrDefaultHeader(t,o,i){let s;return this.requestOptions&&this.requestOptions.headers&&(s=Vr(this.requestOptions.headers)[o]),t[o]||s||i}_getAgent(t){let o,i=ba.getProxyUrl(t),s=i&&i.hostname;if(this._keepAlive&&s&&(o=this._proxyAgent),this._keepAlive&&!s&&(o=this._agent),o)return o;let l=t.protocol==="https:",f=100;if(this.requestOptions&&(f=this.requestOptions.maxSockets||Nr.globalAgent.maxSockets),i&&i.hostname){let m={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`}),{host:i.hostname,port:i.port})},h,d=i.protocol==="https:";l?h=d?Hr.httpsOverHttps:Hr.httpsOverHttp:h=d?Hr.httpOverHttps:Hr.httpOverHttp,o=h(m),this._proxyAgent=o}if(this._keepAlive&&!o){let m={keepAlive:this._keepAlive,maxSockets:f};o=l?new Kn.Agent(m):new Nr.Agent(m),this._agent=o}return o||(o=l?Kn.globalAgent:Nr.globalAgent),l&&this._ignoreSslError&&(o.options=Object.assign(o.options||{},{rejectUnauthorized:!1})),o}_performExponentialBackoff(t){return z(this,void 0,void 0,function*(){t=Math.min(Rf,t);let o=vf*Math.pow(2,t);return new Promise(i=>setTimeout(()=>i(),o))})}_processResponse(t,o){return z(this,void 0,void 0,function*(){return new Promise((i,s)=>z(this,void 0,void 0,function*(){let l=t.message.statusCode||0,f={statusCode:l,result:null,headers:{}};l===be.NotFound&&i(f);function m(y,g){if(typeof g=="string"){let _=new Date(g);if(!isNaN(_.valueOf()))return _}return g}let h,d;try{d=yield t.readBody(),d&&d.length>0&&(o&&o.deserializeDates?h=JSON.parse(d,m):h=JSON.parse(d),f.result=h),f.headers=t.message.headers}catch{}if(l>299){let y;h&&h.message?y=h.message:d&&d.length>0?y=d:y=`Failed request: (${l})`;let g=new gt(y,l);g.result=f.result,s(g)}else i(f)}))})}};L.HttpClient=Zn;var Vr=r=>Object.keys(r).reduce((t,o)=>(t[o.toLowerCase()]=r[o],t),{})});var _a=k(ge=>{"use strict";var ro=ge&&ge.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(ge,"__esModule",{value:!0});ge.PersonalAccessTokenCredentialHandler=ge.BearerCredentialHandler=ge.BasicCredentialHandler=void 0;var Xn=class{constructor(t,o){this.username=t,this.password=o}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.BasicCredentialHandler=Xn;var eo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.BearerCredentialHandler=eo;var to=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ge.PersonalAccessTokenCredentialHandler=to});var wa=k(St=>{"use strict";var ga=St&&St.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0});St.OidcClient=void 0;var Ef=ya(),Pf=_a(),Sa=no(),Ne=class{static createHttpClient(t=!0,o=10){let i={allowRetries:t,maxRetries:o};return new Ef.HttpClient("actions/oidc-client",[new Pf.BearerCredentialHandler(Ne.getRequestToken())],i)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var o;return ga(this,void 0,void 0,function*(){let l=(o=(yield Ne.createHttpClient().getJson(t).catch(f=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${f.statusCode}
 
        Error Message: ${f.result.message}`)})).result)===null||o===void 0?void 0:o.value;if(!l)throw new Error("Response json body do not have ID Token field");return l})}static getIDToken(t){return ga(this,void 0,void 0,function*(){try{let o=Ne.getIDTokenUrl();if(t){let s=encodeURIComponent(t);o=`${o}&audience=${s}`}Sa.debug(`ID token url is ${o}`);let i=yield Ne.getCall(o);return Sa.setSecret(i),i}catch(o){throw new Error(`Error message: ${o.message}`)}})}};St.OidcClient=Ne});var so=k(K=>{"use strict";var oo=K&&K.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.summary=K.markdownSummary=K.SUMMARY_DOCS_URL=K.SUMMARY_ENV_VAR=void 0;var Af=require("os"),io=require("fs"),{access:Cf,appendFile:Of,writeFile:qf}=io.promises;K.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";K.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var ao=class{constructor(){this._buffer=""}filePath(){return oo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[K.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${K.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Cf(t,io.constants.R_OK|io.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,o,i={}){let s=Object.entries(i).map(([l,f])=>` ${l}="${f}"`).join("");return o?`<${t}${s}>${o}</${t}>`:`<${t}${s}>`}write(t){return oo(this,void 0,void 0,function*(){let o=!!t?.overwrite,i=yield this.filePath();return yield(o?qf:Of)(i,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return oo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,o=!1){return this._buffer+=t,o?this.addEOL():this}addEOL(){return this.addRaw(Af.EOL)}addCodeBlock(t,o){let i=Object.assign({},o&&{lang:o}),s=this.wrap("pre",this.wrap("code",t),i);return this.addRaw(s).addEOL()}addList(t,o=!1){let i=o?"ol":"ul",s=t.map(f=>this.wrap("li",f)).join(""),l=this.wrap(i,s);return this.addRaw(l).addEOL()}addTable(t){let o=t.map(s=>{let l=s.map(f=>{if(typeof f=="string")return this.wrap("td",f);let{header:m,data:h,colspan:d,rowspan:y}=f,g=m?"th":"td",_=Object.assign(Object.assign({},d&&{colspan:d}),y&&{rowspan:y});return this.wrap(g,h,_)}).join("");return this.wrap("tr",l)}).join(""),i=this.wrap("table",o);return this.addRaw(i).addEOL()}addDetails(t,o){let i=this.wrap("details",this.wrap("summary",t)+o);return this.addRaw(i).addEOL()}addImage(t,o,i){let{width:s,height:l}=i||{},f=Object.assign(Object.assign({},s&&{width:s}),l&&{height:l}),m=this.wrap("img",null,Object.assign({src:t,alt:o},f));return this.addRaw(m).addEOL()}addHeading(t,o){let i=`h${o}`,s=["h1","h2","h3","h4","h5","h6"].includes(i)?i:"h1",l=this.wrap(s,t);return this.addRaw(l).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,o){let i=Object.assign({},o&&{cite:o}),s=this.wrap("blockquote",t,i);return this.addRaw(s).addEOL()}addLink(t,o){let i=this.wrap("a",t,{href:o});return this.addRaw(i).addEOL()}},Ra=new ao;K.markdownSummary=Ra;K.summary=Ra});var va=k(Z=>{"use strict";var Bf=Z&&Z.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),Df=Z&&Z.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),kf=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Bf(t,r,o);return Df(t,r),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.toPlatformPath=Z.toWin32Path=Z.toPosixPath=void 0;var Wf=kf(require("path"));function Lf(r){return r.replace(/[\\]/g,"/")}Z.toPosixPath=Lf;function Mf(r){return r.replace(/[/]/g,"\\")}Z.toWin32Path=Mf;function If(r){return r.replace(/[/\\]/g,Wf.sep)}Z.toPlatformPath=If});var no=k(v=>{"use strict";var Ff=v&&v.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),Uf=v&&v.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ta=v&&v.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Ff(t,r,o);return Uf(t,r),t},Ea=v&&v.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var le=Ui(),Xe=sa(),wt=Or(),Pa=Ta(require("os")),xf=Ta(require("path")),$f=wa(),Aa;(function(r){r[r.Success=0]="Success",r[r.Failure=1]="Failure"})(Aa=v.ExitCode||(v.ExitCode={}));function zf(r,t){let o=wt.toCommandValue(t);if(process.env[r]=o,process.env.GITHUB_ENV||"")return Xe.issueFileCommand("ENV",Xe.prepareKeyValueMessage(r,t));le.issueCommand("set-env",{name:r},o)}v.exportVariable=zf;function jf(r){le.issueCommand("add-mask",{},r)}v.setSecret=jf;function Nf(r){process.env.GITHUB_PATH||""?Xe.issueFileCommand("PATH",r):le.issueCommand("add-path",{},r),process.env.PATH=`${r}${xf.delimiter}${process.env.PATH}`}v.addPath=Nf;function uo(r,t){let o=process.env[`INPUT_${r.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!o)throw new Error(`Input required and not supplied: ${r}`);return t&&t.trimWhitespace===!1?o:o.trim()}v.getInput=uo;function Hf(r,t){let o=uo(r,t).split(`
`).filter(i=>i!=="");return t&&t.trimWhitespace===!1?o:o.map(i=>i.trim())}v.getMultilineInput=Hf;function Vf(r,t){let o=["true","True","TRUE"],i=["false","False","FALSE"],s=uo(r,t);if(o.includes(s))return!0;if(i.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${r}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=Vf;function Yf(r,t){if(process.env.GITHUB_OUTPUT||"")return Xe.issueFileCommand("OUTPUT",Xe.prepareKeyValueMessage(r,t));process.stdout.write(Pa.EOL),le.issueCommand("set-output",{name:r},wt.toCommandValue(t))}v.setOutput=Yf;function Gf(r){le.issue("echo",r?"on":"off")}v.setCommandEcho=Gf;function Qf(r){process.exitCode=Aa.Failure,Ca(r)}v.setFailed=Qf;function Jf(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=Jf;function Kf(r){le.issueCommand("debug",{},r)}v.debug=Kf;function Ca(r,t={}){le.issueCommand("error",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.error=Ca;function Zf(r,t={}){le.issueCommand("warning",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.warning=Zf;function Xf(r,t={}){le.issueCommand("notice",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.notice=Xf;function ec(r){process.stdout.write(r+Pa.EOL)}v.info=ec;function Oa(r){le.issue("group",r)}v.startGroup=Oa;function qa(){le.issue("endgroup")}v.endGroup=qa;function tc(r,t){return Ea(this,void 0,void 0,function*(){Oa(r);let o;try{o=yield t()}finally{qa()}return o})}v.group=tc;function rc(r,t){if(process.env.GITHUB_STATE||"")return Xe.issueFileCommand("STATE",Xe.prepareKeyValueMessage(r,t));le.issueCommand("save-state",{name:r},wt.toCommandValue(t))}v.saveState=rc;function nc(r){return process.env[`STATE_${r}`]||""}v.getState=nc;function oc(r){return Ea(this,void 0,void 0,function*(){return yield $f.OidcClient.getIDToken(r)})}v.getIDToken=oc;var ic=so();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return ic.summary}});var ac=so();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return ac.markdownSummary}});var lo=va();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return lo.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return lo.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return lo.toPlatformPath}})});var ka=k((Qr,Da)=>{(function(r,t){typeof Qr=="object"&&typeof Da<"u"?t(Qr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Qr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,m=Promise,h=Promise.prototype.then,d=Promise.resolve.bind(m),y=Promise.reject.bind(m);function g(e){return new m(e)}function _(e){return d(e)}function w(e){return y(e)}function S(e,n,a){return h.call(e,n,a)}function M(e,n,a){S(S(e,n,a),void 0,f)}function B(e,n){M(e,n)}function D(e,n){M(e,void 0,n)}function U(e,n,a){return S(e,n,a)}function Q(e){S(e,void 0,f)}let C=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=_(void 0);return a=>S(n,a)})();function x(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function W(e,n,a){try{return _(x(e,n,a))}catch(u){return w(u)}}let We=16384;class re{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,u=a;a._elements.length===We-1&&(u={_elements:[],_next:void 0}),a._elements.push(n),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let n=this._front,a=n,u=this._cursor,c=u+1,p=n._elements,b=p[u];return c===We&&(a=n._next,c=0),--this._size,this._cursor=c,n!==a&&(this._front=a),p[u]=void 0,b}forEach(n){let a=this._cursor,u=this._front,c=u._elements;for(;(a!==c.length||u._next!==void 0)&&!(a===c.length&&(u=u._next,c=u._elements,a=0,c.length===0));)n(c[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function wo(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?un(e):n._state==="closed"?cs(e):Ro(e,n._storedError)}function sn(e,n){let a=e._ownerReadableStream;return he(a,n)}function Re(e){e._ownerReadableStream._state==="readable"?ln(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ds(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ot(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function un(e){e._closedPromise=g((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function Ro(e,n){un(e),ln(e,n)}function cs(e){un(e),vo(e)}function ln(e,n){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function ds(e,n){Ro(e,n)}function vo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let To=t("[[AbortSteps]]"),Eo=t("[[ErrorSteps]]"),fn=t("[[CancelSteps]]"),cn=t("[[PullSteps]]"),Po=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},hs=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ps(e){return typeof e=="object"||typeof e=="function"}function ve(e,n){if(e!==void 0&&!ps(e))throw new TypeError(`${n} is not an object.`)}function ce(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function ms(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Ao(e,n){if(!ms(e))throw new TypeError(`${n} is not an object.`)}function Te(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function dn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function hn(e){return Number(e)}function Co(e){return e===0?0:e}function bs(e){return Co(hs(e))}function Oo(e,n){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Co(c),!Po(c))throw new TypeError(`${n} is not a finite number`);if(c=bs(c),c<0||c>u)throw new TypeError(`${n} is outside the accepted range of ${0} to ${u}, inclusive`);return!Po(c)||c===0?0:c}function pn(e,n){if(!Ue(e))throw new TypeError(`${n} is not a ReadableStream.`)}function it(e){return new Et(e)}function qo(e,n){e._reader._readRequests.push(n)}function mn(e,n,a){let c=e._reader._readRequests.shift();a?c._closeSteps():c._chunkSteps(n)}function Kt(e){return e._reader._readRequests.length}function Bo(e){let n=e._reader;return!(n===void 0||!Le(n))}class Et{constructor(n){if(Te(n,1,"ReadableStreamDefaultReader"),pn(n,"First parameter"),xe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");wo(this,n),this._readRequests=new re}get closed(){return Le(this)?this._closedPromise:w(Zt("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?w(ot("cancel")):sn(this,n):w(Zt("cancel"))}read(){if(!Le(this))return w(Zt("read"));if(this._ownerReadableStream===void 0)return w(ot("read from"));let n,a,u=g((p,b)=>{n=p,a=b});return Pt(this,{_chunkSteps:p=>n({value:p,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:p=>a(p)}),u}releaseLock(){if(!Le(this))throw Zt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Re(this)}}}Object.defineProperties(Et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Le(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Et}function Pt(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[cn](n)}function Zt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Do=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ko{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?U(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?U(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return w(ot("iterate"));let a,u,c=g((b,R)=>{a=b,u=R});return Pt(n,{_chunkSteps:b=>{this._ongoingPromise=void 0,C(()=>a({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Re(n),a({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,Re(n),u(b)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return w(ot("finish iterating"));if(!this._preventCancel){let u=sn(a,n);return Re(a),U(u,()=>({value:n,done:!0}))}return Re(a),_({value:n,done:!0})}}let Wo={next(){return Lo(this)?this._asyncIteratorImpl.next():w(Mo("next"))},return(e){return Lo(this)?this._asyncIteratorImpl.return(e):w(Mo("return"))}};Do!==void 0&&Object.setPrototypeOf(Wo,Do);function ys(e,n){let a=it(e),u=new ko(a,n),c=Object.create(Wo);return c._asyncIteratorImpl=u,c}function Lo(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ko}catch{return!1}}function Mo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Io=Number.isNaN||function(e){return e!==e};function At(e){return e.slice()}function Fo(e,n,a,u,c){new Uint8Array(e).set(new Uint8Array(a,u,c),n)}function qc(e){return e}function Xt(e){return!1}function Uo(e,n,a){if(e.slice)return e.slice(n,a);let u=a-n,c=new ArrayBuffer(u);return Fo(c,0,e,n,u),c}function _s(e){return!(typeof e!="number"||Io(e)||e<0)}function xo(e){let n=Uo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function bn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function yn(e,n,a){if(!_s(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function gs(e){return e._queue.peek().value}function Me(e){e._queue=new re,e._queueTotalSize=0}class Ct{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!_n(this))throw Rn("view");return this._view}respond(n){if(!_n(this))throw Rn("respond");if(Te(n,1,"respond"),n=Oo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Xt(this._view.buffer),or(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!_n(this))throw Rn("respondWithNewView");if(Te(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Xt(n.buffer),ir(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Ct.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class at{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ve(this))throw qt("byobRequest");return wn(this)}get desiredSize(){if(!Ve(this))throw qt("desiredSize");return Go(this)}close(){if(!Ve(this))throw qt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Ot(this)}enqueue(n){if(!Ve(this))throw qt("enqueue");if(Te(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);nr(this,n)}error(n=void 0){if(!Ve(this))throw qt("error");de(this,n)}[fn](n){$o(this),Me(this);let a=this._cancelAlgorithm(n);return rr(this),a}[cn](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Ho(this);let p=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(p);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(b){n._errorSteps(b);return}let p={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}qo(a,n),Ye(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(at.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ve(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof at}function _n(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Ct}function Ye(e){if(!vs(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();M(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ye(e))},u=>{de(e,u)})}function $o(e){Sn(e),e._pendingPullIntos=new re}function gn(e,n){let a=!1;e._state==="closed"&&(a=!0);let u=zo(n);n.readerType==="default"?mn(e,u,a):Ps(e,u,a)}function zo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function er(e,n,a,u){e._queue.push({buffer:n,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function jo(e,n){let a=n.elementSize,u=n.bytesFilled-n.bytesFilled%a,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),p=n.bytesFilled+c,b=p-p%a,R=c,E=!1;b>u&&(R=b-n.bytesFilled,E=!0);let A=e._queue;for(;R>0;){let O=A.peek(),q=Math.min(R,O.byteLength),$=n.byteOffset+n.bytesFilled;Fo(n.buffer,$,O.buffer,O.byteOffset,q),O.byteLength===q?A.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,No(e,q,n),R-=q}return E}function No(e,n,a){a.bytesFilled+=n}function Ho(e){e._queueTotalSize===0&&e._closeRequested?(rr(e),Ft(e._controlledReadableByteStream)):Ye(e)}function Sn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Vo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();jo(e,n)&&(tr(e),gn(e._controlledReadableByteStream,n))}}function Ss(e,n,a){let u=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let p=n.constructor,b=n.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Ko(u,a);return}if(u._state==="closed"){let E=new p(R.buffer,R.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if(jo(e,R)){let E=zo(R);Ho(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");de(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(R),Ko(u,a),Ye(e)}function ws(e,n){let a=e._controlledReadableByteStream;if(vn(a))for(;Zo(a)>0;){let u=tr(e);gn(a,u)}}function Rs(e,n,a){if(No(e,n,a),a.bytesFilled<a.elementSize)return;tr(e);let u=a.bytesFilled%a.elementSize;if(u>0){let c=a.byteOffset+a.bytesFilled,p=Uo(a.buffer,c-u,c);er(e,p,0,p.byteLength)}a.bytesFilled-=u,gn(e._controlledReadableByteStream,a),Vo(e)}function Yo(e,n){let a=e._pendingPullIntos.peek();Sn(e),e._controlledReadableByteStream._state==="closed"?ws(e):Rs(e,n,a),Ye(e)}function tr(e){return e._pendingPullIntos.shift()}function vs(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Bo(n)&&Kt(n)>0||vn(n)&&Zo(n)>0||Go(e)>0)}function rr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ot(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw de(e,u),u}rr(e),Ft(n)}}function nr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=n.buffer,c=n.byteOffset,p=n.byteLength,b=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Xt(R.buffer),R.buffer=R.buffer}if(Sn(e),Bo(a))if(Kt(a)===0)er(e,b,c,p);else{e._pendingPullIntos.length>0&&tr(e);let R=new Uint8Array(b,c,p);mn(a,R,!1)}else vn(a)?(er(e,b,c,p),Vo(e)):er(e,b,c,p);Ye(e)}function de(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&($o(e),Me(e),rr(e),Ri(a,n))}function wn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),u=Object.create(Ct.prototype);Es(u,e,a),e._byobRequest=u}return e._byobRequest}function Go(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function or(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,Yo(e,n)}function ir(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;a.buffer=n.buffer,Yo(e,c)}function Qo(e,n,a,u,c,p,b){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Me(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=p,n._pullAlgorithm=u,n._cancelAlgorithm=c,n._autoAllocateChunkSize=b,n._pendingPullIntos=new re,e._readableStreamController=n;let R=a();M(_(R),()=>{n._started=!0,Ye(n)},E=>{de(n,E)})}function Ts(e,n,a){let u=Object.create(at.prototype),c=()=>{},p=()=>_(void 0),b=()=>_(void 0);n.start!==void 0&&(c=()=>n.start(u)),n.pull!==void 0&&(p=()=>n.pull(u)),n.cancel!==void 0&&(b=E=>n.cancel(E));let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Qo(e,u,c,p,b,a,R)}function Es(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Rn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function qt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Jo(e){return new Bt(e)}function Ko(e,n){e._reader._readIntoRequests.push(n)}function Ps(e,n,a){let c=e._reader._readIntoRequests.shift();a?c._closeSteps(n):c._chunkSteps(n)}function Zo(e){return e._reader._readIntoRequests.length}function vn(e){let n=e._reader;return!(n===void 0||!Ge(n))}class Bt{constructor(n){if(Te(n,1,"ReadableStreamBYOBReader"),pn(n,"First parameter"),xe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ve(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");wo(this,n),this._readIntoRequests=new re}get closed(){return Ge(this)?this._closedPromise:w(ar("closed"))}cancel(n=void 0){return Ge(this)?this._ownerReadableStream===void 0?w(ot("cancel")):sn(this,n):w(ar("cancel"))}read(n){if(!Ge(this))return w(ar("read"));if(!ArrayBuffer.isView(n))return w(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Xt(n.buffer),this._ownerReadableStream===void 0)return w(ot("read from"));let a,u,c=g((b,R)=>{a=b,u=R});return Xo(this,n,{_chunkSteps:b=>a({value:b,done:!1}),_closeSteps:b=>a({value:b,done:!0}),_errorSteps:b=>u(b)}),c}releaseLock(){if(!Ge(this))throw ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Re(this)}}}Object.defineProperties(Bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ge(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Bt}function Xo(e,n,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):Ss(u._readableStreamController,n,a)}function ar(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Dt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Io(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function sr(e){let{size:n}=e;return n||(()=>1)}function ur(e,n){ve(e,n);let a=e?.highWaterMark,u=e?.size;return{highWaterMark:a===void 0?void 0:hn(a),size:u===void 0?void 0:As(u,`${n} has member 'size' that`)}}function As(e,n){return ce(e,n),a=>hn(e(a))}function Cs(e,n){ve(e,n);let a=e?.abort,u=e?.close,c=e?.start,p=e?.type,b=e?.write;return{abort:a===void 0?void 0:Os(a,e,`${n} has member 'abort' that`),close:u===void 0?void 0:qs(u,e,`${n} has member 'close' that`),start:c===void 0?void 0:Bs(c,e,`${n} has member 'start' that`),write:b===void 0?void 0:Ds(b,e,`${n} has member 'write' that`),type:p}}function Os(e,n,a){return ce(e,a),u=>W(e,n,[u])}function qs(e,n,a){return ce(e,a),()=>W(e,n,[])}function Bs(e,n,a){return ce(e,a),u=>x(e,n,[u])}function Ds(e,n,a){return ce(e,a),(u,c)=>W(e,n,[u,c])}function ei(e,n){if(!st(e))throw new TypeError(`${n} is not a WritableStream.`)}function ks(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Ws=typeof AbortController=="function";function Ls(){if(Ws)return new AbortController}class kt{constructor(n={},a={}){n===void 0?n=null:Ao(n,"First parameter");let u=ur(a,"Second parameter"),c=Cs(n,"First parameter");if(ri(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let b=sr(u),R=Dt(u,1);Qs(this,c,R,b)}get locked(){if(!st(this))throw hr("locked");return ut(this)}abort(n=void 0){return st(this)?ut(this)?w(new TypeError("Cannot abort a stream that already has a writer")):lr(this,n):w(hr("abort"))}close(){return st(this)?ut(this)?w(new TypeError("Cannot close a stream that already has a writer")):_e(this)?w(new TypeError("Cannot close an already-closing stream")):ni(this):w(hr("close"))}getWriter(){if(!st(this))throw hr("getWriter");return ti(this)}}Object.defineProperties(kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function ti(e){return new Wt(e)}function Ms(e,n,a,u,c=1,p=()=>1){let b=Object.create(kt.prototype);ri(b);let R=Object.create(lt.prototype);return li(b,R,e,n,a,u,c,p),b}function ri(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new re,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof kt}function ut(e){return e._writer!==void 0}function lr(e,n){var a;if(e._state==="closed"||e._state==="errored")return _(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return _(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,n=void 0);let p=g((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=p,c||En(e,n),p}function ni(e){let n=e._state;if(n==="closed"||n==="errored")return w(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=g((c,p)=>{let b={_resolve:c,_reject:p};e._closeRequest=b}),u=e._writer;return u!==void 0&&e._backpressure&&n==="writable"&&Wn(u),Js(e._writableStreamController),a}function Is(e){return g((a,u)=>{let c={_resolve:a,_reject:u};e._writeRequests.push(c)})}function Tn(e,n){if(e._state==="writable"){En(e,n);return}Pn(e)}function En(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let u=e._writer;u!==void 0&&ii(u,n),!zs(e)&&a._started&&Pn(e)}function Pn(e){e._state="errored",e._writableStreamController[Eo]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new re,e._pendingAbortRequest===void 0){fr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),fr(e);return}let u=e._writableStreamController[To](a._reason);M(u,()=>{a._resolve(),fr(e)},c=>{a._reject(c),fr(e)})}function Fs(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Us(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,Tn(e,n)}function xs(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&hi(a)}function $s(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),Tn(e,n)}function _e(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function zs(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function js(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ns(e){e._inFlightWriteRequest=e._writeRequests.shift()}function fr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Dn(n,e._storedError)}function An(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?nu(a):Wn(a)),e._backpressure=n}class Wt{constructor(n){if(Te(n,1,"WritableStreamDefaultWriter"),ei(n,"First parameter"),ut(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!_e(n)&&n._backpressure?mr(this):pi(this),pr(this);else if(a==="erroring")kn(this,n._storedError),pr(this);else if(a==="closed")pi(this),tu(this);else{let u=n._storedError;kn(this,u),di(this,u)}}get closed(){return Qe(this)?this._closedPromise:w(Je("closed"))}get desiredSize(){if(!Qe(this))throw Je("desiredSize");if(this._ownerWritableStream===void 0)throw Lt("desiredSize");return Gs(this)}get ready(){return Qe(this)?this._readyPromise:w(Je("ready"))}abort(n=void 0){return Qe(this)?this._ownerWritableStream===void 0?w(Lt("abort")):Hs(this,n):w(Je("abort"))}close(){if(!Qe(this))return w(Je("close"));let n=this._ownerWritableStream;return n===void 0?w(Lt("close")):_e(n)?w(new TypeError("Cannot close an already-closing stream")):oi(this)}releaseLock(){if(!Qe(this))throw Je("releaseLock");this._ownerWritableStream!==void 0&&ai(this)}write(n=void 0){return Qe(this)?this._ownerWritableStream===void 0?w(Lt("write to")):si(this,n):w(Je("write"))}}Object.defineProperties(Wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Qe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Wt}function Hs(e,n){let a=e._ownerWritableStream;return lr(a,n)}function oi(e){let n=e._ownerWritableStream;return ni(n)}function Vs(e){let n=e._ownerWritableStream,a=n._state;return _e(n)||a==="closed"?_(void 0):a==="errored"?w(n._storedError):oi(e)}function Ys(e,n){e._closedPromiseState==="pending"?Dn(e,n):ru(e,n)}function ii(e,n){e._readyPromiseState==="pending"?mi(e,n):ou(e,n)}function Gs(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:fi(n._writableStreamController)}function ai(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ii(e,a),Ys(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function si(e,n){let a=e._ownerWritableStream,u=a._writableStreamController,c=Ks(u,n);if(a!==e._ownerWritableStream)return w(Lt("write to"));let p=a._state;if(p==="errored")return w(a._storedError);if(_e(a)||p==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return w(a._storedError);let b=Is(a);return Zs(u,n,c),b}let ui={};class lt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Cn(this))throw Bn("abortReason");return this._abortReason}get signal(){if(!Cn(this))throw Bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Cn(this))throw Bn("error");this._controlledWritableStream._state==="writable"&&ci(this,n)}[To](n){let a=this._abortAlgorithm(n);return cr(this),a}[Eo](){Me(this)}}Object.defineProperties(lt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Cn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof lt}function li(e,n,a,u,c,p,b,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Me(n),n._abortReason=void 0,n._abortController=Ls(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=b,n._writeAlgorithm=u,n._closeAlgorithm=c,n._abortAlgorithm=p;let E=qn(n);An(e,E);let A=a(),O=_(A);M(O,()=>{n._started=!0,dr(n)},q=>{n._started=!0,Tn(e,q)})}function Qs(e,n,a,u){let c=Object.create(lt.prototype),p=()=>{},b=()=>_(void 0),R=()=>_(void 0),E=()=>_(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.write!==void 0&&(b=A=>n.write(A,c)),n.close!==void 0&&(R=()=>n.close()),n.abort!==void 0&&(E=A=>n.abort(A)),li(e,c,p,b,R,E,a,u)}function cr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Js(e){yn(e,ui,0),dr(e)}function Ks(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return On(e,a),1}}function fi(e){return e._strategyHWM-e._queueTotalSize}function Zs(e,n,a){try{yn(e,n,a)}catch(c){On(e,c);return}let u=e._controlledWritableStream;if(!_e(u)&&u._state==="writable"){let c=qn(e);An(u,c)}dr(e)}function dr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){Pn(n);return}if(e._queue.length===0)return;let u=gs(e);u===ui?Xs(e):eu(e,u)}function On(e,n){e._controlledWritableStream._state==="writable"&&ci(e,n)}function Xs(e){let n=e._controlledWritableStream;js(n),bn(e);let a=e._closeAlgorithm();cr(e),M(a,()=>{xs(n)},u=>{$s(n,u)})}function eu(e,n){let a=e._controlledWritableStream;Ns(a);let u=e._writeAlgorithm(n);M(u,()=>{Fs(a);let c=a._state;if(bn(e),!_e(a)&&c==="writable"){let p=qn(e);An(a,p)}dr(e)},c=>{a._state==="writable"&&cr(e),Us(a,c)})}function qn(e){return fi(e)<=0}function ci(e,n){let a=e._controlledWritableStream;cr(e),En(a,n)}function hr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Je(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Lt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function pr(e){e._closedPromise=g((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function di(e,n){pr(e),Dn(e,n)}function tu(e){pr(e),hi(e)}function Dn(e,n){e._closedPromise_reject!==void 0&&(Q(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ru(e,n){di(e,n)}function hi(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function mr(e){e._readyPromise=g((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function kn(e,n){mr(e),mi(e,n)}function pi(e){mr(e),Wn(e)}function mi(e,n){e._readyPromise_reject!==void 0&&(Q(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function nu(e){mr(e)}function ou(e,n){kn(e,n)}function Wn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let bi=typeof DOMException<"u"?DOMException:void 0;function iu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function au(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let su=iu(bi)?bi:au();function yi(e,n,a,u,c,p){let b=it(e),R=ti(n);e._disturbed=!0;let E=!1,A=_(void 0);return g((O,q)=>{let $;if(p!==void 0){if($=()=>{let T=new su("Aborted","AbortError"),P=[];u||P.push(()=>n._state==="writable"?lr(n,T):_(void 0)),c||P.push(()=>e._state==="readable"?he(e,T):_(void 0)),J(()=>Promise.all(P.map(I=>I())),!0,T)},p.aborted){$();return}p.addEventListener("abort",$)}function pe(){return g((T,P)=>{function I(ne){ne?T():S(dt(),I,P)}I(!1)})}function dt(){return E?_(!0):S(R._readyPromise,()=>g((T,P)=>{Pt(b,{_chunkSteps:I=>{A=S(si(R,I),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:P})}))}if(Ee(e,b._closedPromise,T=>{u?ae(!0,T):J(()=>lr(n,T),!0,T)}),Ee(n,R._closedPromise,T=>{c?ae(!0,T):J(()=>he(e,T),!0,T)}),V(e,b._closedPromise,()=>{a?ae():J(()=>Vs(R))}),_e(n)||n._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?ae(!0,T):J(()=>he(e,T),!0,T)}Q(pe());function $e(){let T=A;return S(A,()=>T!==A?$e():void 0)}function Ee(T,P,I){T._state==="errored"?I(T._storedError):D(P,I)}function V(T,P,I){T._state==="closed"?I():B(P,I)}function J(T,P,I){if(E)return;E=!0,n._state==="writable"&&!_e(n)?B($e(),ne):ne();function ne(){M(T(),()=>Pe(P,I),ht=>Pe(!0,ht))}}function ae(T,P){E||(E=!0,n._state==="writable"&&!_e(n)?B($e(),()=>Pe(T,P)):Pe(T,P))}function Pe(T,P){ai(R),Re(b),p!==void 0&&p.removeEventListener("abort",$),T?q(P):O(void 0)}})}class ft{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!br(this))throw gr("desiredSize");return Ln(this)}close(){if(!br(this))throw gr("close");if(!ct(this))throw new TypeError("The stream is not in a state that permits close");It(this)}enqueue(n=void 0){if(!br(this))throw gr("enqueue");if(!ct(this))throw new TypeError("The stream is not in a state that permits enqueue");return _r(this,n)}error(n=void 0){if(!br(this))throw gr("error");Ie(this,n)}[fn](n){Me(this);let a=this._cancelAlgorithm(n);return yr(this),a}[cn](n){let a=this._controlledReadableStream;if(this._queue.length>0){let u=bn(this);this._closeRequested&&this._queue.length===0?(yr(this),Ft(a)):Mt(this),n._chunkSteps(u)}else qo(a,n),Mt(this)}}Object.defineProperties(ft.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ft.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function br(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof ft}function Mt(e){if(!_i(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();M(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Mt(e))},u=>{Ie(e,u)})}function _i(e){let n=e._controlledReadableStream;return!ct(e)||!e._started?!1:!!(xe(n)&&Kt(n)>0||Ln(e)>0)}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function It(e){if(!ct(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(yr(e),Ft(n))}function _r(e,n){if(!ct(e))return;let a=e._controlledReadableStream;if(xe(a)&&Kt(a)>0)mn(a,n,!1);else{let u;try{u=e._strategySizeAlgorithm(n)}catch(c){throw Ie(e,c),c}try{yn(e,n,u)}catch(c){throw Ie(e,c),c}}Mt(e)}function Ie(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(Me(e),yr(e),Ri(a,n))}function Ln(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function uu(e){return!_i(e)}function ct(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function gi(e,n,a,u,c,p,b){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Me(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=b,n._strategyHWM=p,n._pullAlgorithm=u,n._cancelAlgorithm=c,e._readableStreamController=n;let R=a();M(_(R),()=>{n._started=!0,Mt(n)},E=>{Ie(n,E)})}function lu(e,n,a,u){let c=Object.create(ft.prototype),p=()=>{},b=()=>_(void 0),R=()=>_(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.pull!==void 0&&(b=()=>n.pull(c)),n.cancel!==void 0&&(R=E=>n.cancel(E)),gi(e,c,p,b,R,a,u)}function gr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function fu(e,n){return Ve(e._readableStreamController)?du(e):cu(e)}function cu(e,n){let a=it(e),u=!1,c=!1,p=!1,b=!1,R,E,A,O,q,$=g(V=>{q=V});function pe(){return u?(c=!0,_(void 0)):(u=!0,Pt(a,{_chunkSteps:J=>{C(()=>{c=!1;let ae=J,Pe=J;p||_r(A._readableStreamController,ae),b||_r(O._readableStreamController,Pe),u=!1,c&&pe()})},_closeSteps:()=>{u=!1,p||It(A._readableStreamController),b||It(O._readableStreamController),(!p||!b)&&q(void 0)},_errorSteps:()=>{u=!1}}),_(void 0))}function dt(V){if(p=!0,R=V,b){let J=At([R,E]),ae=he(e,J);q(ae)}return $}function $e(V){if(b=!0,E=V,p){let J=At([R,E]),ae=he(e,J);q(ae)}return $}function Ee(){}return A=Mn(Ee,pe,dt),O=Mn(Ee,pe,$e),D(a._closedPromise,V=>{Ie(A._readableStreamController,V),Ie(O._readableStreamController,V),(!p||!b)&&q(void 0)}),[A,O]}function du(e){let n=it(e),a=!1,u=!1,c=!1,p=!1,b=!1,R,E,A,O,q,$=g(T=>{q=T});function pe(T){D(T._closedPromise,P=>{T===n&&(de(A._readableStreamController,P),de(O._readableStreamController,P),(!p||!b)&&q(void 0))})}function dt(){Ge(n)&&(Re(n),n=it(e),pe(n)),Pt(n,{_chunkSteps:P=>{C(()=>{u=!1,c=!1;let I=P,ne=P;if(!p&&!b)try{ne=xo(P)}catch(ht){de(A._readableStreamController,ht),de(O._readableStreamController,ht),q(he(e,ht));return}p||nr(A._readableStreamController,I),b||nr(O._readableStreamController,ne),a=!1,u?Ee():c&&V()})},_closeSteps:()=>{a=!1,p||Ot(A._readableStreamController),b||Ot(O._readableStreamController),A._readableStreamController._pendingPullIntos.length>0&&or(A._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&or(O._readableStreamController,0),(!p||!b)&&q(void 0)},_errorSteps:()=>{a=!1}})}function $e(T,P){Le(n)&&(Re(n),n=Jo(e),pe(n));let I=P?O:A,ne=P?A:O;Xo(n,T,{_chunkSteps:pt=>{C(()=>{u=!1,c=!1;let mt=P?b:p;if(P?p:b)mt||ir(I._readableStreamController,pt);else{let Li;try{Li=xo(pt)}catch(Fn){de(I._readableStreamController,Fn),de(ne._readableStreamController,Fn),q(he(e,Fn));return}mt||ir(I._readableStreamController,pt),nr(ne._readableStreamController,Li)}a=!1,u?Ee():c&&V()})},_closeSteps:pt=>{a=!1;let mt=P?b:p,Cr=P?p:b;mt||Ot(I._readableStreamController),Cr||Ot(ne._readableStreamController),pt!==void 0&&(mt||ir(I._readableStreamController,pt),!Cr&&ne._readableStreamController._pendingPullIntos.length>0&&or(ne._readableStreamController,0)),(!mt||!Cr)&&q(void 0)},_errorSteps:()=>{a=!1}})}function Ee(){if(a)return u=!0,_(void 0);a=!0;let T=wn(A._readableStreamController);return T===null?dt():$e(T._view,!1),_(void 0)}function V(){if(a)return c=!0,_(void 0);a=!0;let T=wn(O._readableStreamController);return T===null?dt():$e(T._view,!0),_(void 0)}function J(T){if(p=!0,R=T,b){let P=At([R,E]),I=he(e,P);q(I)}return $}function ae(T){if(b=!0,E=T,p){let P=At([R,E]),I=he(e,P);q(I)}return $}function Pe(){}return A=wi(Pe,Ee,J),O=wi(Pe,V,ae),pe(n),[A,O]}function hu(e,n){ve(e,n);let a=e,u=a?.autoAllocateChunkSize,c=a?.cancel,p=a?.pull,b=a?.start,R=a?.type;return{autoAllocateChunkSize:u===void 0?void 0:Oo(u,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:pu(c,a,`${n} has member 'cancel' that`),pull:p===void 0?void 0:mu(p,a,`${n} has member 'pull' that`),start:b===void 0?void 0:bu(b,a,`${n} has member 'start' that`),type:R===void 0?void 0:yu(R,`${n} has member 'type' that`)}}function pu(e,n,a){return ce(e,a),u=>W(e,n,[u])}function mu(e,n,a){return ce(e,a),u=>W(e,n,[u])}function bu(e,n,a){return ce(e,a),u=>x(e,n,[u])}function yu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function _u(e,n){ve(e,n);let a=e?.mode;return{mode:a===void 0?void 0:gu(a,`${n} has member 'mode' that`)}}function gu(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Su(e,n){ve(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function Si(e,n){ve(e,n);let a=e?.preventAbort,u=e?.preventCancel,c=e?.preventClose,p=e?.signal;return p!==void 0&&wu(p,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(u),preventClose:Boolean(c),signal:p}}function wu(e,n){if(!ks(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Ru(e,n){ve(e,n);let a=e?.readable;dn(a,"readable","ReadableWritablePair"),pn(a,`${n} has member 'readable' that`);let u=e?.writable;return dn(u,"writable","ReadableWritablePair"),ei(u,`${n} has member 'writable' that`),{readable:a,writable:u}}class Fe{constructor(n={},a={}){n===void 0?n=null:Ao(n,"First parameter");let u=ur(a,"Second parameter"),c=hu(n,"First parameter");if(In(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=Dt(u,0);Ts(this,c,p)}else{let p=sr(u),b=Dt(u,1);lu(this,c,b,p)}}get locked(){if(!Ue(this))throw Ke("locked");return xe(this)}cancel(n=void 0){return Ue(this)?xe(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):he(this,n):w(Ke("cancel"))}getReader(n=void 0){if(!Ue(this))throw Ke("getReader");return _u(n,"First parameter").mode===void 0?it(this):Jo(this)}pipeThrough(n,a={}){if(!Ue(this))throw Ke("pipeThrough");Te(n,1,"pipeThrough");let u=Ru(n,"First parameter"),c=Si(a,"Second parameter");if(xe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ut(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=yi(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return Q(p),u.readable}pipeTo(n,a={}){if(!Ue(this))return w(Ke("pipeTo"));if(n===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!st(n))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Si(a,"Second parameter")}catch(c){return w(c)}return xe(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ut(n)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):yi(this,n,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ue(this))throw Ke("tee");let n=fu(this);return At(n)}values(n=void 0){if(!Ue(this))throw Ke("values");let a=Su(n,"First parameter");return ys(this,a.preventCancel)}}Object.defineProperties(Fe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Fe.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Fe.prototype,t.asyncIterator,{value:Fe.prototype.values,writable:!0,configurable:!0});function Mn(e,n,a,u=1,c=()=>1){let p=Object.create(Fe.prototype);In(p);let b=Object.create(ft.prototype);return gi(p,b,e,n,a,u,c),p}function wi(e,n,a){let u=Object.create(Fe.prototype);In(u);let c=Object.create(at.prototype);return Qo(u,c,e,n,a,0,void 0),u}function In(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ue(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Fe}function xe(e){return e._reader!==void 0}function he(e,n){if(e._disturbed=!0,e._state==="closed")return _(void 0);if(e._state==="errored")return w(e._storedError);Ft(e);let a=e._reader;a!==void 0&&Ge(a)&&(a._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),a._readIntoRequests=new re);let u=e._readableStreamController[fn](n);return U(u,o)}function Ft(e){e._state="closed";let n=e._reader;n!==void 0&&(vo(n),Le(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new re))}function Ri(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(ln(a,n),Le(a)?(a._readRequests.forEach(u=>{u._errorSteps(n)}),a._readRequests=new re):(a._readIntoRequests.forEach(u=>{u._errorSteps(n)}),a._readIntoRequests=new re))}function Ke(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function vi(e,n){ve(e,n);let a=e?.highWaterMark;return dn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:hn(a)}}let Ti=e=>e.byteLength;try{Object.defineProperty(Ti,"name",{value:"size",configurable:!0})}catch{}class Sr{constructor(n){Te(n,1,"ByteLengthQueuingStrategy"),n=vi(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Pi(this))throw Ei("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Pi(this))throw Ei("size");return Ti}}Object.defineProperties(Sr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Sr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ei(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Pi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Sr}let Ai=()=>1;try{Object.defineProperty(Ai,"name",{value:"size",configurable:!0})}catch{}class wr{constructor(n){Te(n,1,"CountQueuingStrategy"),n=vi(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Oi(this))throw Ci("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Oi(this))throw Ci("size");return Ai}}Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ci(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Oi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof wr}function vu(e,n){ve(e,n);let a=e?.flush,u=e?.readableType,c=e?.start,p=e?.transform,b=e?.writableType;return{flush:a===void 0?void 0:Tu(a,e,`${n} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Eu(c,e,`${n} has member 'start' that`),transform:p===void 0?void 0:Pu(p,e,`${n} has member 'transform' that`),writableType:b}}function Tu(e,n,a){return ce(e,a),u=>W(e,n,[u])}function Eu(e,n,a){return ce(e,a),u=>x(e,n,[u])}function Pu(e,n,a){return ce(e,a),(u,c)=>W(e,n,[u,c])}class Rr{constructor(n={},a={},u={}){n===void 0&&(n=null);let c=ur(a,"Second parameter"),p=ur(u,"Third parameter"),b=vu(n,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Dt(p,0),E=sr(p),A=Dt(c,1),O=sr(c),q,$=g(pe=>{q=pe});Au(this,$,A,O,R,E),Ou(this,b),b.start!==void 0?q(b.start(this._transformStreamController)):q(void 0)}get readable(){if(!qi(this))throw Wi("readable");return this._readable}get writable(){if(!qi(this))throw Wi("writable");return this._writable}}Object.defineProperties(Rr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Au(e,n,a,u,c,p){function b(){return n}function R($){return Du(e,$)}function E($){return ku(e,$)}function A(){return Wu(e)}e._writable=Ms(b,R,A,E,a,u);function O(){return Lu(e)}function q($){return Tr(e,$),_(void 0)}e._readable=Mn(b,O,q,c,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Er(e,!0),e._transformStreamController=void 0}function qi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Rr}function vr(e,n){Ie(e._readable._readableStreamController,n),Tr(e,n)}function Tr(e,n){Bi(e._transformStreamController),On(e._writable._writableStreamController,n),e._backpressure&&Er(e,!1)}function Er(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=g(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class Ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pr(this))throw Ar("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Ln(n)}enqueue(n=void 0){if(!Pr(this))throw Ar("enqueue");Di(this,n)}error(n=void 0){if(!Pr(this))throw Ar("error");qu(this,n)}terminate(){if(!Pr(this))throw Ar("terminate");Bu(this)}}Object.defineProperties(Ut.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Pr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ut}function Cu(e,n,a,u){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=u}function Ou(e,n){let a=Object.create(Ut.prototype),u=p=>{try{return Di(a,p),_(void 0)}catch(b){return w(b)}},c=()=>_(void 0);n.transform!==void 0&&(u=p=>n.transform(p,a)),n.flush!==void 0&&(c=()=>n.flush(a)),Cu(e,a,u,c)}function Bi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Di(e,n){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!ct(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{_r(u,n)}catch(p){throw Tr(a,p),a._readable._storedError}uu(u)!==a._backpressure&&Er(a,!0)}function qu(e,n){vr(e._controlledTransformStream,n)}function ki(e,n){let a=e._transformAlgorithm(n);return U(a,void 0,u=>{throw vr(e._controlledTransformStream,u),u})}function Bu(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;It(a);let u=new TypeError("TransformStream terminated");Tr(n,u)}function Du(e,n){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return U(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return ki(a,n)})}return ki(a,n)}function ku(e,n){return vr(e,n),_(void 0)}function Wu(e){let n=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return Bi(a),U(u,()=>{if(n._state==="errored")throw n._storedError;It(n._readableStreamController)},c=>{throw vr(e,c),n._storedError})}function Lu(e){return Er(e,!1),e._backpressureChangePromise}function Ar(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Wi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Sr,r.CountQueuingStrategy=wr,r.ReadableByteStreamController=at,r.ReadableStream=Fe,r.ReadableStreamBYOBReader=Bt,r.ReadableStreamBYOBRequest=Ct,r.ReadableStreamDefaultController=ft,r.ReadableStreamDefaultReader=Et,r.TransformStream=Rr,r.TransformStreamDefaultController=Ut,r.WritableStream=kt,r.WritableStreamDefaultController=lt,r.WritableStreamDefaultWriter=Wt,Object.defineProperty(r,"__esModule",{value:!0})})});var Wa=k(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,ka())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let m=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=m.byteLength,l.enqueue(new Uint8Array(m)),i===s.size&&l.close()}})})}catch{}});async function*fo(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,La),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let f=await s.slice(i,Math.min(s.size,i+La)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var fd,La,Ma,uc,qe,jt=xt(()=>{fd=Ae(Wa(),1);La=65536;Ma=class co{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof co?f=l:f=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of fo(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of fo(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=fo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:s}=this,l=t<0?Math.max(s+t,0):Math.min(t,s),f=o<0?Math.max(s+o,0):Math.min(o,s),m=Math.max(f-l,0),h=this.#e,d=[],y=0;for(let _ of h){if(y>=m)break;let w=ArrayBuffer.isView(_)?_.byteLength:_.size;if(l&&w<=l)l-=w,f-=w;else{let S;ArrayBuffer.isView(_)?(S=_.subarray(l,Math.min(w,f)),y+=S.byteLength):(S=_.slice(l,Math.min(w,f)),y+=S.size),f-=w,d.push(S),l=0}}let g=new co([],{type:String(i).toLowerCase()});return g.#r=m,g.#e=d,g}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Ma.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});uc=Ma,qe=uc});var lc,fc,Rt,ho=xt(()=>{jt();lc=class extends qe{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof qe&&/^(File)$/.test(t[Symbol.toStringTag])}},fc=lc,Rt=fc});function Ua(r,t=qe){var o=`${Ia()}${Ia()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((l,f)=>typeof l=="string"?i.push(s+po(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+po(f)+`"; filename="${po(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var Nt,cc,dc,Ia,hc,Fa,po,et,tt,Jr=xt(()=>{jt();ho();({toStringTag:Nt,iterator:cc,hasInstance:dc}=Symbol),Ia=Math.random,hc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Fa=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Nt])?[(o=o!==void 0?o+"":t[Nt]=="File"?t.name:"blob",r),t.name!==o||t[Nt]=="blob"?new Rt([t],o,t):t]:[r,t+""]),po=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),et=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},tt=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nt](){return"FormData"}[cc](){return this.entries()}static[dc](t){return t&&typeof t=="object"&&t[Nt]==="FormData"&&!hc.some(o=>typeof t[o]!="function")}append(...t){et("append",arguments,2),this.#e.push(Fa(...t))}delete(t){et("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){et("get",arguments,1),t+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return et("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return et("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){et("forEach",arguments,1);for(var[i,s]of this)t.call(o,s,i,this)}set(...t){et("set",arguments,2);var o=[],i=!0;t=Fa(...t),this.#e.forEach(s=>{s[0]===t[0]?i&&(i=!o.push(t)):o.push(s)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Na=k((vd,ja)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}ja.exports=globalThis.DOMException});var Vt,Ha,pc,Zr,bo=xt(()=>{Vt=require("node:fs"),Ha=Ae(Na(),1);ho();jt();({stat:pc}=Vt.promises),Zr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Zr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await pc(this.#e);if(t>this.lastModified)throw new Ha.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Vt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ya={};$u(Ya,{toFormData:()=>wc});function Sc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function wc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new yo(o[1]||o[2]),s,l,f,m,h,d,y=[],g=new tt,_=D=>{f+=B.decode(D,{stream:!0})},w=D=>{y.push(D)},S=()=>{let D=new Rt(y,d,{type:h});g.append(m,D)},M=()=>{g.append(m,f)},B=new TextDecoder("utf-8");B.decode(),i.onPartBegin=function(){i.onPartData=_,i.onPartEnd=M,s="",l="",f="",m="",h="",d=null,y.length=0},i.onHeaderField=function(D){s+=B.decode(D,{stream:!0})},i.onHeaderValue=function(D){l+=B.decode(D,{stream:!0})},i.onHeaderEnd=function(){if(l+=B.decode(),s=s.toLowerCase(),s==="content-disposition"){let D=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);D&&(m=D[2]||D[3]||""),d=Sc(l),d&&(i.onPartData=w,i.onPartEnd=S)}else s==="content-type"&&(h=l);l="",s=""};for await(let D of r)i.write(D);return i.end(),g}var Se,F,Va,He,Xr,en,mc,Yt,bc,yc,_c,gc,rt,yo,Ga=xt(()=>{bo();Jr();Se=0,F={START_BOUNDARY:Se++,HEADER_FIELD_START:Se++,HEADER_FIELD:Se++,HEADER_VALUE_START:Se++,HEADER_VALUE:Se++,HEADER_VALUE_ALMOST_DONE:Se++,HEADERS_ALMOST_DONE:Se++,PART_DATA_START:Se++,PART_DATA:Se++,END:Se++},Va=1,He={PART_BOUNDARY:Va,LAST_BOUNDARY:Va*=2},Xr=10,en=13,mc=32,Yt=45,bc=58,yc=97,_c=122,gc=r=>r|32,rt=()=>{},yo=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=rt,this.onHeaderField=rt,this.onHeadersEnd=rt,this.onHeaderValue=rt,this.onPartBegin=rt,this.onPartData=rt,this.onPartEnd=rt,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=F.START_BOUNDARY}write(t){let o=0,i=t.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:m,index:h,state:d,flags:y}=this,g=this.boundary.length,_=g-1,w=t.length,S,M,B=C=>{this[C+"Mark"]=o},D=C=>{delete this[C+"Mark"]},U=(C,x,W,We)=>{(x===void 0||x!==W)&&this[C](We&&We.subarray(x,W))},Q=(C,x)=>{let W=C+"Mark";W in this&&(x?(U(C,this[W],o,t),delete this[W]):(U(C,this[W],t.length,t),this[W]=0))};for(o=0;o<i;o++)switch(S=t[o],d){case F.START_BOUNDARY:if(h===f.length-2){if(S===Yt)y|=He.LAST_BOUNDARY;else if(S!==en)return;h++;break}else if(h-1===f.length-2){if(y&He.LAST_BOUNDARY&&S===Yt)d=F.END,y=0;else if(!(y&He.LAST_BOUNDARY)&&S===Xr)h=0,U("onPartBegin"),d=F.HEADER_FIELD_START;else return;break}S!==f[h+2]&&(h=-2),S===f[h+2]&&h++;break;case F.HEADER_FIELD_START:d=F.HEADER_FIELD,B("onHeaderField"),h=0;case F.HEADER_FIELD:if(S===en){D("onHeaderField"),d=F.HEADERS_ALMOST_DONE;break}if(h++,S===Yt)break;if(S===bc){if(h===1)return;Q("onHeaderField",!0),d=F.HEADER_VALUE_START;break}if(M=gc(S),M<yc||M>_c)return;break;case F.HEADER_VALUE_START:if(S===mc)break;B("onHeaderValue"),d=F.HEADER_VALUE;case F.HEADER_VALUE:S===en&&(Q("onHeaderValue",!0),U("onHeaderEnd"),d=F.HEADER_VALUE_ALMOST_DONE);break;case F.HEADER_VALUE_ALMOST_DONE:if(S!==Xr)return;d=F.HEADER_FIELD_START;break;case F.HEADERS_ALMOST_DONE:if(S!==Xr)return;U("onHeadersEnd"),d=F.PART_DATA_START;break;case F.PART_DATA_START:d=F.PART_DATA,B("onPartData");case F.PART_DATA:if(s=h,h===0){for(o+=_;o<w&&!(t[o]in m);)o+=g;o-=_,S=t[o]}if(h<f.length)f[h]===S?(h===0&&Q("onPartData",!0),h++):h=0;else if(h===f.length)h++,S===en?y|=He.PART_BOUNDARY:S===Yt?y|=He.LAST_BOUNDARY:h=0;else if(h-1===f.length)if(y&He.PART_BOUNDARY){if(h=0,S===Xr){y&=~He.PART_BOUNDARY,U("onPartEnd"),U("onPartBegin"),d=F.HEADER_FIELD_START;break}}else y&He.LAST_BOUNDARY&&S===Yt?(U("onPartEnd"),d=F.END,y=0):h=0;if(h>0)l[h-1]=S;else if(s>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);U("onPartData",0,s,C),s=0,B("onPartData"),o--}break;case F.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}Q("onHeaderField"),Q("onHeaderValue"),Q("onPartData"),this.index=h,this.state=d,this.flags=y}end(){if(this.state===F.HEADER_FIELD_START&&this.index===0||this.state===F.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==F.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var te=Ae(no());var ls=Ae(require("node:http"),1),fs=Ae(require("node:https"),1),nt=Ae(require("node:zlib"),1),ie=Ae(require("node:stream"),1),Jt=require("node:buffer");function sc(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",s=!1,l=o[0]||"text/plain",f=l;for(let y=1;y<o.length;y++)o[y]==="base64"?s=!0:o[y]&&(f+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let m=s?"base64":"ascii",h=unescape(r.substring(t+1)),d=Buffer.from(h,m);return d.type=l,d.typeFull=f,d.charset=i,d}var Ba=sc;var fe=Ae(require("node:stream"),1),De=require("node:util"),oe=require("node:buffer");jt();Jr();var Be=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var X=class extends Be{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Kr=Symbol.toStringTag,mo=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Kr]==="URLSearchParams",Ht=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Kr]),xa=r=>typeof r=="object"&&(r[Kr]==="AbortSignal"||r[Kr]==="EventTarget"),$a=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)},za=(r,t)=>{let o=new URL(t).protocol,i=new URL(r).protocol;return o===i};var Rc=(0,De.promisify)(fe.default.pipeline),ee=Symbol("Body internals"),we=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:mo(t)?t=oe.Buffer.from(t.toString()):Ht(t)||oe.Buffer.isBuffer(t)||(De.types.isAnyArrayBuffer(t)?t=oe.Buffer.from(t):ArrayBuffer.isView(t)?t=oe.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof fe.default||(t instanceof tt?(t=Ua(t),i=t.type.split("=")[1]):t=oe.Buffer.from(String(t))));let s=t;oe.Buffer.isBuffer(t)?s=fe.default.Readable.from(t):Ht(t)&&(s=fe.default.Readable.from(t.stream())),this[ee]={body:t,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof fe.default&&t.on("error",l=>{let f=l instanceof Be?l:new X(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[ee].error=f})}get body(){return this[ee].stream}get bodyUsed(){return this[ee].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await _o(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new tt,s=new URLSearchParams(await this.text());for(let[l,f]of s)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Ga(),Ya));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[ee].body&&this[ee].body.type||"",o=await this.arrayBuffer();return new qe([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await _o(this);return new TextDecoder().decode(t)}buffer(){return _o(this)}};we.prototype.buffer=(0,De.deprecate)(we.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(we.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,De.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function _o(r){if(r[ee].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[ee].disturbed=!0,r[ee].error)throw r[ee].error;let{body:t}=r;if(t===null)return oe.Buffer.alloc(0);if(!(t instanceof fe.default))return oe.Buffer.alloc(0);let o=[],i=0;try{for await(let s of t){if(r.size>0&&i+s.length>r.size){let l=new X(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof Be?s:new X(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?oe.Buffer.from(o.join("")):oe.Buffer.concat(o,i)}catch(s){throw new X(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new X(`Premature close of server response while trying to fetch ${r.url}`)}var vt=(r,t)=>{let o,i,{body:s}=r[ee];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof fe.default&&typeof s.getBoundary!="function"&&(o=new fe.PassThrough({highWaterMark:t}),i=new fe.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(i),r[ee].stream=o,s=i),s},vc=(0,De.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),tn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":mo(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ht(r)?r.type||null:oe.Buffer.isBuffer(r)||De.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof tt?`multipart/form-data; boundary=${t[ee].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${vc(r)}`:r instanceof fe.default?null:"text/plain;charset=UTF-8",Qa=r=>{let{body:t}=r[ee];return t===null?0:Ht(t)?t.size:oe.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ja=async(r,{body:t})=>{t===null?r.end():await Rc(t,r)};var go=require("node:util"),Gt=Ae(require("node:http"),1),rn=typeof Gt.default.validateHeaderName=="function"?Gt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},So=typeof Gt.default.validateHeaderValue=="function"?Gt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},G=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof G){let i=t.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(f=>[s,f]))}else if(t!=null)if(typeof t=="object"&&!go.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||go.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(rn(i),So(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(f,m)=>(rn(f),So(f,String(m)),URLSearchParams.prototype[s].call(i,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(rn(f),URLSearchParams.prototype[s].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(G.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Ka(r=[]){return new G(r.reduce((t,o,i,s)=>(i%2===0&&t.push(s.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return rn(t),So(t,String(o)),!0}catch{return!1}}))}var Tc=new Set([301,302,303,307,308]),nn=r=>Tc.has(r);var ye=Symbol("Response internals"),H=class extends we{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,s=new G(o.headers);if(t!==null&&!s.has("Content-Type")){let l=tn(t,this);l&&s.append("Content-Type",l)}this[ye]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ye].type}get url(){return this[ye].url||""}get status(){return this[ye].status}get ok(){return this[ye].status>=200&&this[ye].status<300}get redirected(){return this[ye].counter>0}get statusText(){return this[ye].statusText}get headers(){return this[ye].headers}get highWaterMark(){return this[ye].highWaterMark}clone(){return new H(vt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!nn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new H(null,{status:0,statusText:""});return t[ye].type="error",t}static json(t=void 0,o={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let s=new G(o&&o.headers);return s.has("content-type")||s.set("content-type","application/json"),new H(i,{...o,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var as=require("node:url"),ss=require("node:util");var Za=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var es=require("node:net");function Xa(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ts=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),rs="strict-origin-when-cross-origin";function ns(r){if(!ts.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Ec(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,es.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function Tt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Ec(r)}function os(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,l=Xa(s),f=Xa(s,!0);l.toString().length>4096&&(l=f),t&&(l=t(l)),o&&(f=o(f));let m=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Tt(l)&&!Tt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===m.origin?l:Tt(l)&&!Tt(m)?"no-referrer":f;case"same-origin":return l.origin===m.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===m.origin?l:f;case"no-referrer-when-downgrade":return Tt(l)&&!Tt(m)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function is(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&ts.has(i)&&(o=i);return o}var j=Symbol("Request internals"),Qt=r=>typeof r=="object"&&typeof r[j]=="object",Pc=(0,ss.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ke=class extends we{constructor(t,o={}){let i;if(Qt(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Qt(o)&&"data"in o&&Pc(),(o.body!=null||Qt(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Qt(t)&&t.body!==null?vt(t):null;super(l,{size:o.size||t.size||0});let f=new G(o.headers||t.headers||{});if(l!==null&&!f.has("Content-Type")){let d=tn(l,this);d&&f.set("Content-Type",d)}let m=Qt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!xa(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=o.referrer==null?t.referrer:o.referrer;if(h==="")h="no-referrer";else if(h){let d=new URL(h);h=/^about:(\/\/)?client$/.test(d)?"client":d}else h=void 0;this[j]={method:s,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:i,signal:m,referrer:h},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,as.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=ns(t)}clone(){return new ke(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ke.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var us=r=>{let{parsedURL:t}=r[j],o=new G(r[j].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let m=Qa(r);typeof m=="number"&&!Number.isNaN(m)&&(i=String(m))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=rs),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=os(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=r;typeof s=="function"&&(s=s(t));let l=Za(t),f={path:t.pathname+l,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:f}};var on=class extends Be{constructor(t,o="aborted"){super(t,o)}};Jr();bo();var Ac=new Set(["data:","http:","https:"]);async function an(r,t){return new Promise((o,i)=>{let s=new ke(r,t),{parsedURL:l,options:f}=us(s);if(!Ac.has(l.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let S=Ba(s.url),M=new H(S,{headers:{"Content-Type":S.typeFull}});o(M);return}let m=(l.protocol==="https:"?fs.default:ls.default).request,{signal:h}=s,d=null,y=()=>{let S=new on("The operation was aborted.");i(S),s.body&&s.body instanceof ie.default.Readable&&s.body.destroy(S),!(!d||!d.body)&&d.body.emit("error",S)};if(h&&h.aborted){y();return}let g=()=>{y(),w()},_=m(l.toString(),f);h&&h.addEventListener("abort",g);let w=()=>{_.abort(),h&&h.removeEventListener("abort",g)};_.on("error",S=>{i(new X(`request to ${s.url} failed, reason: ${S.message}`,"system",S)),w()}),Cc(_,S=>{d&&d.body&&d.body.destroy(S)}),process.version<"v14"&&_.on("socket",S=>{let M;S.prependListener("end",()=>{M=S._eventsCount}),S.prependListener("close",B=>{if(d&&M<S._eventsCount&&!B){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",D)}})}),_.on("response",S=>{_.setTimeout(0);let M=Ka(S.rawHeaders);if(nn(S.statusCode)){let C=M.get("Location"),x=null;try{x=C===null?null:new URL(C,s.url)}catch{if(s.redirect!=="manual"){i(new X(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),w();return}}switch(s.redirect){case"error":i(new X(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(x===null)break;if(s.counter>=s.follow){i(new X(`maximum redirect reached at: ${s.url}`,"max-redirect")),w();return}let W={headers:new G(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:vt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!$a(s.url,x)||!za(s.url,x))for(let re of["authorization","www-authenticate","cookie","cookie2"])W.headers.delete(re);if(S.statusCode!==303&&s.body&&t.body instanceof ie.default.Readable){i(new X("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&s.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length"));let We=is(M);We&&(W.referrerPolicy=We),o(an(new ke(x,W))),w();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}h&&S.once("end",()=>{h.removeEventListener("abort",g)});let B=(0,ie.pipeline)(S,new ie.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&S.on("aborted",g);let D={url:s.url,status:S.statusCode,statusText:S.statusMessage,headers:M,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},U=M.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||U===null||S.statusCode===204||S.statusCode===304){d=new H(B,D),o(d);return}let Q={flush:nt.default.Z_SYNC_FLUSH,finishFlush:nt.default.Z_SYNC_FLUSH};if(U==="gzip"||U==="x-gzip"){B=(0,ie.pipeline)(B,nt.default.createGunzip(Q),C=>{C&&i(C)}),d=new H(B,D),o(d);return}if(U==="deflate"||U==="x-deflate"){let C=(0,ie.pipeline)(S,new ie.PassThrough,x=>{x&&i(x)});C.once("data",x=>{(x[0]&15)===8?B=(0,ie.pipeline)(B,nt.default.createInflate(),W=>{W&&i(W)}):B=(0,ie.pipeline)(B,nt.default.createInflateRaw(),W=>{W&&i(W)}),d=new H(B,D),o(d)}),C.once("end",()=>{d||(d=new H(B,D),o(d))});return}if(U==="br"){B=(0,ie.pipeline)(B,nt.default.createBrotliDecompress(),C=>{C&&i(C)}),d=new H(B,D),o(d);return}d=new H(B,D),o(d)}),Ja(_,s).catch(i)})}function Cc(r,t){let o=Jt.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;r.on("response",f=>{let{headers:m}=f;i=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",f=>{let m=()=>{if(i&&!s){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",t(d)}},h=d=>{s=Jt.Buffer.compare(d.slice(-5),o)===0,!s&&l&&(s=Jt.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Jt.Buffer.compare(d.slice(-2),o.slice(3))===0),l=d};f.prependListener("close",m),f.on("data",h),r.on("close",()=>{f.removeListener("close",m),f.removeListener("data",h)})})}var Oc=`
query ($name: String, $type: EntitySearchQueryBuilderType, $domain: EntitySearchQueryBuilderDomain) {
  actor {
    entitySearch(queryBuilder: {name: $name, domain: $domain, type: $type}) {
      results {
        entities {
          guid
          name
        }
      }
    }
  }
}
`;(async()=>{let r=te.getInput("api-key",{required:!0}),t=te.getInput("name",{required:!0}),o=te.getInput("domain"),i=te.getInput("type"),s=await an("https://api.newrelic.com/graphql",{method:"POST",headers:{"Content-Type":"application/json","Api-Key":r},body:JSON.stringify({query:Oc.replace(/\n\s*/g," ").trim(),variables:JSON.stringify({name:t,domain:o,type:i})})}),l=await s.json();if(console.log(JSON.stringify({status:s.status,data:l})),l.errors){l.errors.forEach(m=>te.error(m.message)),te.setFailed("Request failed");return}let f=l?.data?.actor?.entitySearch?.results?.entities??[];te.setOutput("count",f.length),f.length>0&&te.setOutput("guid",f[0].guid),f.length>1&&te.warning("More than one matching entity was found")})();
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
//# sourceMappingURL=index.js.map
